webpackJsonp([8],{Oxcr:function(e,t,n){"use strict";var o=n("f4F5"),a=(n.n(o),n("/eQD")),s=(n.n(a),n("Tidh"));n.n(s)},Tidh:function(e,t){},deBG:function(e,t,n){"use strict";var o=n("9JZw"),a=Object(o.a)({render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:e.b({disabled:e.disabled})},[n("div",{class:e.b("head")},[n("div",{class:e.b("lines")}),n("div",{class:e.b("gradient")},[n("h2",{domProps:{innerHTML:e._s(e.faceAmount)}}),n("p",[e._v(e._s(e.conditionMessage))])])]),n("div",{class:e.b("body")},[n("h2",[e._v(e._s(e.data.name))]),n("span",[e._v(e._s(e.validPeriod))]),e.disabled&&e.data.reason?n("p",[e._v(e._s(e.data.reason))]):e._e(),e.chosen?n("div",{class:e.b("corner")},[n("icon",{attrs:{name:"success"}})],1):e._e()])])},name:"coupon-item",props:{data:Object,chosen:Boolean,disabled:Boolean},computed:{validPeriod:function(){return this.getDate(this.data.start_at)+"-"+this.getDate(this.data.end_at)},faceAmount:function(){return 0!==this.data.denominations?"<span>¥</span> "+this.formatAmount(this.data.denominations):0!==this.data.discount?this.formatDiscount(this.data.discount):""},conditionMessage:function(){var e=this.data.origin_condition;return e=e%100==0?Math.round(e/100):(e/100).toFixed(2),0===this.data.origin_condition?this.$t("unlimited"):this.$t("condition",e)}},methods:{getDate:function(e){var t=new Date(1e3*e);return t.getFullYear()+"."+this.padZero(t.getMonth()+1)+"."+this.padZero(t.getDate())},padZero:function(e){return(e<10?"0":"")+e},formatDiscount:function(e){return this.$t("discount",""+(e/10).toFixed(e%10==0?0:1))},formatAmount:function(e){return(e/100).toFixed(e%100==0?0:e%10==0?1:2)}}}),s=n("0zAV"),i=n("SSsa");t.a=Object(o.a)({render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:e.b()},[e.showExchangeBar?n("cell-group",{class:e.b("top")},[n("field",{staticClass:"van-hairline--surround",class:e.b("field"),attrs:{clearable:"",placeholder:e.inputPlaceholder||e.$t("placeholder"),maxlength:20},model:{value:e.currentCode,callback:function(t){e.currentCode=t},expression:"currentCode"}}),n("van-button",{class:e.b("exchange"),attrs:{size:"small",type:"danger",text:e.exchangeButtonText||e.$t("exchange"),loading:e.exchangeButtonLoading,disabled:e.buttonDisabled},on:{click:e.onClickExchangeButton}})],1):e._e(),n("div",{ref:"list",class:e.b("list",{"with-exchange":e.showExchangeBar})},[e._l(e.coupons,function(t,o){return n("coupon-item",{key:t.id||t.name,ref:"card",refInFor:!0,attrs:{data:t,chosen:o===e.chosenCoupon},nativeOn:{click:function(t){e.$emit("change",o)}}})}),e.disabledCoupons.length?n("h3",[e._v(e._s(e.disabledListTitle||e.$t("disabled")))]):e._e(),e._l(e.disabledCoupons,function(e){return n("coupon-item",{key:e.id||e.name,attrs:{disabled:"",data:e}})}),e.coupons.length||e.disabledCoupons.length?e._e():n("div",{class:e.b("empty")},[n("img",{attrs:{src:"https://img.yzcdn.cn/v2/image/wap/trade/new_order/empty@2x.png"}}),n("p",[e._v(e._s(e.$t("empty")))])])],2),n("div",{directives:[{name:"show",rawName:"v-show",value:e.showCloseButton,expression:"showCloseButton"}],staticClass:"van-hairline--top",class:e.b("close"),domProps:{textContent:e._s(e.closeButtonText||e.$t("close"))},on:{click:function(t){e.$emit("change",-1)}}})],1)},name:"coupon-list",components:{VanButton:i.a,Field:s.a,CouponItem:a},model:{prop:"code"},props:{code:String,closeButtonText:String,inputPlaceholder:String,disabledListTitle:String,exchangeButtonText:String,exchangeButtonLoading:Boolean,exchangeButtonDisabled:Boolean,exchangeMinLength:{type:Number,default:1},chosenCoupon:{type:Number,default:-1},coupons:{type:Array,default:function(){return[]}},disabledCoupons:{type:Array,default:function(){return[]}},displayedCouponIndex:{type:Number,default:-1},showExchangeBar:{type:Boolean,default:!0},showCloseButton:{type:Boolean,default:!0}},data:function(){return{currentCode:this.code||""}},computed:{buttonDisabled:function(){return!this.exchangeButtonLoading&&(this.exchangeButtonDisabled||this.currentCode.length<this.exchangeMinLength)}},watch:{code:function(e){this.currentCode=e},currentCode:function(e){this.$emit("input",e)},displayedCouponIndex:function(e){this.scrollToShowCoupon(e)}},mounted:function(){this.scrollToShowCoupon(this.displayedCouponIndex)},methods:{onClickExchangeButton:function(){this.$emit("exchange",this.currentCode),this.code||(this.currentCode="")},scrollToShowCoupon:function(e){var t=this;-1!==e&&this.$nextTick(function(){var n=t.$refs,o=n.card,a=n.list;a&&o&&o[e]&&(a.scrollTop=o[e].$el.offsetTop-100)})}}})},rJB2:function(e,t){},w89q:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("bOdI"),a=n.n(o),s=(n("Oxcr"),n("deBG")),i=n("3nlj"),c={data:function(){return{mainarea:!1,chosenCoupon:-1,coupons:(e=this.$store.state.cards,t=[],e.forEach(function(e){var n=e.used?1:0;t.push({available:n,discount:0,denominations:0,origin_condition:0,reason:"",value:150,name:e.code,start_at:new Date(e.not_before).getTime()/1e3,end_at:new Date(e.not_after).getTime()/1e3})}),t),disabledCoupons:[]};var e,t},components:a()({Headersec:i.a},s.a.name,s.a),mounted:function(){console.log(this.$store.state.cards),this.mainarea=!0},methods:{}},r={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"page"},[t("headersec",{attrs:{tabname:"我的兑换卡"}}),this._v(" "),t("transition",{attrs:{name:"slide-go"}},[t("div",{directives:[{name:"show",rawName:"v-show",value:this.mainarea,expression:"mainarea"}],staticClass:"container"},[t("van-coupon-list",{attrs:{"show-exchange-bar":!1,"show-close-button":!1,editable:!1,coupons:this.coupons,"chosen-coupon":this.chosenCoupon,"disabled-coupons":this.disabledCoupons}})],1)])],1)},staticRenderFns:[]};var d=n("VU/8")(c,r,!1,function(e){n("rJB2")},"data-v-3f72746a",null);t.default=d.exports}});